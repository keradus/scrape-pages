!function(t){function e(e){for(var r,i,l=e[0],d=e[1],c=e[2],p=0,u=[];p<l.length;p++)i=l[p],a[i]&&u.push(a[i][0]),a[i]=0;for(r in d)Object.prototype.hasOwnProperty.call(d,r)&&(t[r]=d[r]);for(s&&s(e);u.length;)u.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,l=1;l<n.length;l++){var d=n[l];0!==a[d]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},a={0:0},o=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],d=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var s=d;o.push([41,1]),n()}({26:function(t,e){},28:function(t,e){},36:function(t,e,n){},41:function(t,e,n){"use strict";n.r(e);var r=n(3);var a=({rectNode:t,get:e,baseSvg:n,svgGroup:a,margin:o,nodeGroup:i,linkGroup:l,diagonal:d})=>c=>{const s=r.a(c.scrape,t=>[...t.scrapeEach||[],...t.scrapeNext?[t.scrapeNext]:[]]);r.d().nodeSize([t.height+t.margin,t.width+t.margin])(s);const p=s.descendants().sort((t,e)=>e.y-t.y),u=s.links().map(e=>({...e,source:{...e.source,y:e.source.y+t.width,x:e.source.x+20},target:{...e.target,y:e.target.y-12,x:e.target.x}}));i.selectAll("*").remove(),l.selectAll("*").remove();const g=i.selectAll("g").data(p),h=g.enter().append("g").attr("transform",n=>`translate(${n[e.x]}, ${n[e.y]-t.height/2})`),f=h.merge(g).append("foreignObject").classed("label",!0).attr("width",t.width).attr("height",t.height).append("xhtml:div").classed("scrape-step",!0).attr("title",t=>JSON.stringify(t.data,(t,e)=>"scrapeEach"===t&&e.length?""+e:"scrapeNext"===t&&e?""+e:e,2));f.append("div").classed("name",!0).text(t=>t.data.name),f.append("div").classed("download",!0).classed("identity",t=>!t.data.download).text(t=>(t=>{return t.download?"Download":"identity(x) = x"})(t.data)),f.append("div").classed("parse",!0).classed("identity",t=>!t.data.parse).text(t=>(t=>{if(t.parse)return`Parse ${t.parse.expect.toUpperCase()}`;return"identity(x) = x"})(t.data));h.filter(t=>t.data.download&&t.data.download.increment).append("g").classed("link",!0).append("path").attr("d",e=>`M ${t.width} ${t.height/2+20}\n      C ${t.width+20} ${t.height/2+20} ${t.width+40} -30 ${t.width/2} -30\n      C -42 -30 -32 ${t.height/2} -12 ${t.height/2}`);const m=l.selectAll("path").data(u);m.enter().append("g").merge(m).classed("link",!0).append("path").attr("d",d).attr("marker-end","url(#end-arrow)");const w=a.node().getBBox();n.attr("width",w.width+o.right+o.left).attr("height",w.height+o.top+o.bottom),a.attr("transform",`translate(${o.left}, ${w.height/2+o.top})`)},o=n(12),i=n.n(o);const l=t=>{const e=i.a.compress(t,{outputEncoding:"Base64"});window.history.replaceState(null,"","#"+e)};var d=n(13),c=n.n(d);n(36);const s=t=>(...e)=>{t(...e),f()},p=(()=>{if(window.location.hash){const t=window.location.hash.substring(1),e=i.a.decompress(t,{inputEncoding:"Base64"});return JSON.parse(e)}})()||{scrape:{name:"homepage",download:"example.com",parse:".special-id",scrapeEach:{name:"paginated",download:{urlTemplate:"example.com/?id={value}/{index}",increment:1},scrapeEach:[{name:"title",parse:".title"},{name:"image-parse",parse:{selector:"img",attribute:"src"},scrapeEach:{name:"image",download:"{value}"}}]}}},u={configIsOpen:!0,valid:!0,inputConfig:JSON.stringify(p,null,2),fullConfig:c()(p)},g={shareIcon:null,configInputDiv:null,configInput:null,normalizeButton:null,hideButton:null,hideButtonIcon:null,treeContainer:null,flowErrorBlock:null,d3Elements:null},h={handleConfigInput:s(t=>{try{u.inputConfig=t.target.value,u.fullConfig=c()(JSON.parse(u.inputConfig)),u.valid=!0,u.flowError=null,l(u.inputConfig)}catch(t){if(!["SyntaxError","RuntimeTypeError"].includes(t.name))throw t;"RuntimeTypeError"===t.name&&(console.log("here"),u.flowError=t.toString()),u.valid=!1}}),handleHideButtonClick:s(()=>{u.configIsOpen=!u.configIsOpen}),handleNormalizeButtonClick:s(()=>{u.inputConfig=JSON.stringify(u.fullConfig,null,2),l(u.inputConfig)}),handleShareIconClick:s(()=>{window.alert("Just copy the url to share with someone!")})},f=()=>{g.configInput.value=u.inputConfig,a(g.d3Elements)(u.fullConfig),g.configInputDiv.className=u.configIsOpen?"":"hidden",g.hideButtonIcon.className=u.configIsOpen?"fas fa-caret-left":"fas fa-caret-right",g.configInput.className=u.valid?"":"invalid",g.normalizeButton.disabled=!u.valid,g.flowErrorBlock.textContent=u.flowError,g.treeContainer.className=u.flowError?"hide-tree":"",g.flowErrorBlock.className=u.flowError?"show-error":""};window.onload=(()=>{g.shareIcon=document.getElementById("share"),g.configInputDiv=document.getElementById("user-input"),g.normalizeButton=document.getElementById("normalize-button"),g.configInput=document.getElementById("config-input"),g.hideButton=document.getElementById("hide-button"),g.hideButtonIcon=document.querySelector("#hide-button i"),g.treeContainer=document.getElementById("tree-container"),g.flowErrorBlock=document.getElementById("flow-error-block"),g.d3Elements=(()=>{const t={x:"y",y:"x",width:"height",height:"width"},e={top:50,right:50,bottom:50,left:50};const n={width:140,height:75,textMargin:5,margin:68},a=r.c("#tree-container").append("svg").attr("width",200+e.right+e.left).attr("height",400+e.top+e.bottom),o=a.append("g").attr("class","drawarea").attr("transform",`translate(${e.left}, ${e.top})`),i=(a.append("svg:defs").append("marker").attr("id","end-arrow").attr("viewBox","0 -5 10 10").attr("refX",0).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").attr("class","arrow").append("path").attr("d","M0,-5L10,0L0,5"),o.append("g").attr("id","nodes")),l=o.append("g").attr("id","links"),d=r.b().x(e=>e[t.x]).y(e=>e[t.y]);return{get:t,rectNode:n,margin:e,baseSvg:a,svgGroup:o,nodeGroup:i,linkGroup:l,diagonal:d}})(),g.configInput.oninput=h.handleConfigInput,g.hideButton.onclick=h.handleHideButtonClick,g.normalizeButton.onclick=h.handleNormalizeButtonClick,g.shareIcon.onclick=h.handleShareIconClick,f()})}});